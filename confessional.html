<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Anonymous Release | Psychezone International</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary-soul: #5D3FD3;
            --calm-mind: #6AC0C0;
            --hope-glow: #FF9A76;
            --dark-sanctuary: #0A0A1A;
            --transition: all 0.3s ease;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: var(--dark-sanctuary);
            color: white;
            min-height: 100vh;
        }

        /* Header */
        header {
            background: rgba(10, 10, 26, 0.95);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            padding: 1rem 5%;
        }

        .nav-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 1200px;
            margin: 0 auto;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
            text-decoration: none;
        }

        .logo-icon { font-size: 2rem; color: var(--primary-soul); }
        .logo-text {
            font-size: 1.8rem;
            font-weight: 800;
            background: linear-gradient(to right, var(--primary-soul), var(--calm-mind));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }

        /* Main Container */
        .confessional-container {
            max-width: 800px;
            margin: 2rem auto;
            padding: 0 1rem;
        }

        /* Security Header */
        .security-header {
            text-align: center;
            padding: 2rem;
            margin-bottom: 3rem;
            background: linear-gradient(135deg, rgba(93, 63, 211, 0.1), rgba(106, 192, 192, 0.1));
            border-radius: 20px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            position: relative;
        }

        .security-icon {
            font-size: 3rem;
            color: var(--calm-mind);
            margin-bottom: 1rem;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }

        .security-badge {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(255, 154, 118, 0.2);
            color: var(--hope-glow);
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: bold;
        }

        /* Writing Area */
        .writing-area {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 20px;
            padding: 2rem;
            margin-bottom: 2rem;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .writing-prompt {
            font-size: 1.2rem;
            color: var(--calm-mind);
            margin-bottom: 1.5rem;
            text-align: center;
        }

        .confession-input {
            width: 100%;
            min-height: 200px;
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 15px;
            padding: 1.5rem;
            color: white;
            font-size: 1.1rem;
            resize: vertical;
            margin-bottom: 1.5rem;
            transition: var(--transition);
        }

        .confession-input:focus {
            border-color: var(--primary-soul);
            background: rgba(255, 255, 255, 0.15);
            outline: none;
        }

        .input-tools {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }

        .word-count {
            color: rgba(255, 255, 255, 0.6);
            font-size: 0.9rem;
        }

        .format-tools {
            display: flex;
            gap: 1rem;
        }

        .format-btn {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 10px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: var(--transition);
        }

        .format-btn:hover {
            background: rgba(93, 63, 211, 0.3);
            transform: translateY(-2px);
        }

        /* Emotion Selector */
        .emotion-selector {
            margin: 2rem 0;
        }

        .emotion-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            gap: 1rem;
            margin: 1rem 0;
        }

        .emotion-option {
            background: rgba(255, 255, 255, 0.05);
            border: 2px solid transparent;
            border-radius: 15px;
            padding: 1rem;
            text-align: center;
            cursor: pointer;
            transition: var(--transition);
        }

        .emotion-option:hover {
            transform: translateY(-3px);
            background: rgba(255, 255, 255, 0.1);
        }

        .emotion-option.selected {
            border-color: var(--primary-soul);
            background: rgba(93, 63, 211, 0.2);
        }

        .emotion-icon {
            font-size: 2rem;
            margin-bottom: 0.5rem;
        }

        /* Release Options */
        .release-options {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 1.5rem;
            margin: 2rem 0;
        }

        .release-option {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1rem;
            border-radius: 10px;
            margin-bottom: 1rem;
            cursor: pointer;
            transition: var(--transition);
        }

        .release-option:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        .release-option.selected {
            background: rgba(93, 63, 211, 0.2);
            border: 2px solid var(--primary-soul);
        }

        .option-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: rgba(106, 192, 192, 0.2);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--calm-mind);
        }

        /* Action Buttons */
        .action-buttons {
            display: flex;
            gap: 1rem;
            margin-top: 2rem;
        }

        .action-btn {
            flex: 1;
            padding: 1.2rem;
            border-radius: 15px;
            font-weight: 600;
            font-size: 1.1rem;
            border: none;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.8rem;
        }

        .btn-release {
            background: linear-gradient(45deg, var(--primary-soul), #7B5FE8);
            color: white;
        }

        .btn-release:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(93, 63, 211, 0.3);
        }

        .btn-save {
            background: rgba(255, 255, 255, 0.1);
            color: white;
            border: 2px solid rgba(255, 255, 255, 0.2);
        }

        .btn-save:hover {
            background: rgba(255, 255, 255, 0.15);
            transform: translateY(-3px);
        }

        /* Archive Section */
        .archive-section {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 20px;
            padding: 2rem;
            margin-top: 3rem;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .archive-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }

        .archive-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 1rem;
        }

        .archive-item {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 1.5rem;
            position: relative;
            transition: var(--transition);
        }

        .archive-item:hover {
            background: rgba(255, 255, 255, 0.08);
            transform: translateY(-3px);
        }

        .archive-emotion {
            position: absolute;
            top: 15px;
            right: 15px;
            font-size: 1.5rem;
        }

        .archive-date {
            font-size: 0.8rem;
            color: rgba(255, 255, 255, 0.6);
            margin-bottom: 0.5rem;
        }

        /* Statistics */
        .stats-section {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 1rem;
            margin: 2rem 0;
        }

        .stat-card {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 1.5rem;
            text-align: center;
        }

        .stat-value {
            font-size: 2.5rem;
            font-weight: bold;
            background: linear-gradient(to right, var(--primary-soul), var(--calm-mind));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }

        .stat-label {
            color: rgba(255, 255, 255, 0.6);
            font-size: 0.9rem;
            margin-top: 0.5rem;
        }

        /* Security Features */
        .security-features {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 1.5rem;
            margin: 2rem 0;
            border-left: 4px solid var(--calm-mind);
        }

        .security-list {
            list-style: none;
            margin-top: 1rem;
        }

        .security-list li {
            padding: 0.5rem 0;
            color: rgba(255, 255, 255, 0.8);
        }

        .security-list li:before {
            content: 'âœ“';
            color: var(--calm-mind);
            margin-right: 0.5rem;
            font-weight: bold;
        }

        /* Encryption Animation */
        .encryption-animation {
            width: 100%;
            height: 4px;
            background: linear-gradient(90deg, 
                var(--primary-soul) 0%, 
                var(--calm-mind) 50%, 
                var(--primary-soul) 100%);
            background-size: 200% 100%;
            animation: encrypt 2s linear infinite;
            border-radius: 2px;
            margin: 1rem 0;
        }

        @keyframes encrypt {
            0% { background-position: 200% 0; }
            100% { background-position: -200% 0; }
        }

        /* Responsive */
        @media (max-width: 768px) {
            .action-buttons {
                flex-direction: column;
            }
            
            .input-tools {
                flex-direction: column;
                gap: 1rem;
                align-items: flex-start;
            }
            
            .emotion-grid {
                grid-template-columns: repeat(3, 1fr);
            }
            
            .archive-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="nav-container">
            <a href="index.html" class="logo">
                <i class="fas fa-brain logo-icon"></i>
                <div class="logo-text">PSYCHEZONE</div>
            </a>
            <div style="display: flex; gap: 1rem;">
                <a href="dashboard.html" style="color: white; text-decoration: none; padding: 0.5rem 1rem;">
                    Dashboard
                </a>
            </div>
        </div>
    </header>

    <main class="confessional-container">
        <!-- Security Header -->
        <section class="security-header">
            <span class="security-badge">100% ANONYMOUS</span>
            <i class="fas fa-user-secret security-icon"></i>
            <h1 style="font-size: 2.5rem; margin-bottom: 1rem; background: linear-gradient(to right, white, var(--calm-mind));
               -webkit-background-clip: text; background-clip: text; color: transparent;">
                Safe Release Space
            </h1>
            <p style="color: rgba(255, 255, 255, 0.8); max-width: 600px; margin: 0 auto;">
                Release your thoughts, feelings, and burdens without identification. 
                Everything here is encrypted and never stored with your personal information.
            </p>
        </section>

        <!-- Security Features -->
        <div class="security-features">
            <h3 style="color: var(--calm-mind); margin-bottom: 0.5rem;">
                <i class="fas fa-shield-alt"></i> How We Protect You
            </h3>
            <ul class="security-list">
                <li>No registration required</li>
                <li>End-to-end encryption</li>
                <li>Automatic deletion after 30 days</li>
                <li>No IP address logging</li>
                <li>No connection to your therapy records</li>
            </ul>
        </div>

        <!-- Statistics -->
        <div class="stats-section">
            <div class="stat-card">
                <div class="stat-value" id="totalReleases">0</div>
                <div class="stat-label">Total Releases</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="thisMonth">0</div>
                <div class="stat-label">This Month</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="avgLength">0</div>
                <div class="stat-label">Avg. Words</div>
            </div>
            <div class="stat-card">
                <div class="stat-value">100%</div>
                <div class="stat-label">Anonymous</div>
            </div>
        </div>

        <!-- Writing Area -->
        <section class="writing-area">
            <div class="writing-prompt" id="currentPrompt">
                What's on your mind today? You're safe here.
            </div>
            
            <div class="encryption-animation"></div>
            
            <textarea class="confession-input" id="confessionInput" 
                      placeholder="Write anything you need to release... 
                      This space is completely confidential and will be encrypted."></textarea>
            
            <div class="input-tools">
                <div class="word-count">
                    Words: <span id="wordCount">0</span>
                </div>
                <div class="format-tools">
                    <button class="format-btn" onclick="formatText('bold')">
                        <i class="fas fa-bold"></i>
                    </button>
                    <button class="format-btn" onclick="formatText('italic')">
                        <i class="fas fa-italic"></i>
                    </button>
                    <button class="format-btn" onclick="clearText()">
                        <i class="fas fa-trash-alt"></i>
                    </button>
                </div>
            </div>

            <!-- Emotion Selector -->
            <div class="emotion-selector">
                <div style="color: var(--calm-mind); margin-bottom: 1rem;">
                    <i class="fas fa-heart"></i> How does this make you feel?
                </div>
                <div class="emotion-grid" id="emotionGrid">
                    <!-- Emotions will be populated by JS -->
                </div>
            </div>

            <!-- Release Options -->
            <div class="release-options">
                <div style="color: var(--calm-mind); margin-bottom: 1rem;">
                    <i class="fas fa-archive"></i> How would you like to release this?
                </div>
                
                <div class="release-option selected" data-option="encrypt">
                    <div class="option-icon">
                        <i class="fas fa-lock"></i>
                    </div>
                    <div>
                        <div style="font-weight: bold;">Encrypt & Store</div>
                        <div style="color: rgba(255,255,255,0.6); font-size: 0.9rem;">
                            Keep it private for yourself
                        </div>
                    </div>
                </div>
                
                <div class="release-option" data-option="burn">
                    <div class="option-icon">
                        <i class="fas fa-fire"></i>
                    </div>
                    <div>
                        <div style="font-weight: bold;">Burn After Reading</div>
                        <div style="color: rgba(255,255,255,0.6); font-size: 0.9rem;">
                            Delete automatically after viewing
                        </div>
                    </div>
                </div>
                
                <div class="release-option" data-option="share">
                    <div class="option-icon">
                        <i class="fas fa-users"></i>
                    </div>
                    <div>
                        <div style="font-weight: bold;">Anonymous Sharing</div>
                        <div style="color: rgba(255,255,255,0.6); font-size: 0.9rem;">
                            Share without identification (no replies)
                        </div>
                    </div>
                </div>
            </div>

            <!-- Action Buttons -->
            <div class="action-buttons">
                <button class="action-btn btn-release" onclick="releaseConfession()">
                    <i class="fas fa-paper-plane"></i>
                    Release Now
                </button>
                <button class="action-btn btn-save" onclick="saveDraft()">
                    <i class="fas fa-save"></i>
                    Save Draft
                </button>
            </div>
        </section>

        <!-- Archive Section -->
        <section class="archive-section" id="archiveSection">
            <div class="archive-header">
                <h3 style="color: var(--calm-mind);">
                    <i class="fas fa-history"></i> Your Release History
                </h3>
                <button onclick="clearArchive()" style="background: rgba(255,255,255,0.1); color: white; 
                       border: 1px solid rgba(255,255,255,0.2); padding: 0.5rem 1rem; 
                       border-radius: 10px; cursor: pointer;">
                    Clear All
                </button>
            </div>
            
            <div class="archive-grid" id="archiveGrid">
                <!-- Archive items will be populated by JS -->
            </div>
            
            <div style="text-align: center; margin-top: 1rem; color: rgba(255,255,255,0.6);">
                <i class="fas fa-info-circle"></i> Entries are automatically deleted after 30 days
            </div>
        </section>

        <!-- Support Resources -->
        <div style="background: rgba(93, 63, 211, 0.1); border-radius: 15px; padding: 1.5rem; margin-top: 3rem;">
            <h4 style="color: var(--hope-glow); margin-bottom: 1rem;">
                <i class="fas fa-life-ring"></i> Need More Support?
            </h4>
            <p style="color: rgba(255,255,255,0.8); margin-bottom: 1rem;">
                If you're experiencing severe distress or having thoughts of harming yourself or others:
            </p>
            <div style="display: flex; gap: 1rem; flex-wrap: wrap;">
                <a href="contact.html" style="background: var(--primary-soul); color: white; 
                   padding: 0.8rem 1.5rem; border-radius: 25px; text-decoration: none;">
                    Emergency Contact
                </a>
                <a href="voice-tools.html" style="background: rgba(106, 192, 192, 0.2); color: var(--calm-mind); 
                   padding: 0.8rem 1.5rem; border-radius: 25px; text-decoration: none;">
                    Calming Exercises
                </a>
                <a href="therapies.html" style="background: rgba(255, 154, 118, 0.2); color: var(--hope-glow); 
                   padding: 0.8rem 1.5rem; border-radius: 25px; text-decoration: none;">
                    Professional Help
                </a>
            </div>
        </div>
    </main>

    <script>
        // Emotions data
        const emotions = [
            { icon: 'ðŸ˜¢', label: 'Sad', color: '#5D3FD3' },
            { icon: 'ðŸ˜”', label: 'Lonely', color: '#6AC0C0' },
            { icon: 'ðŸ˜°', label: 'Anxious', color: '#FF9A76' },
            { icon: 'ðŸ˜ ', label: 'Angry', color: '#FF6B6B' },
            { icon: 'ðŸ˜´', label: 'Tired', color: '#9D4EDD' },
            { icon: 'ðŸ˜', label: 'Numb', color: '#888' },
            { icon: 'ðŸ™‚', label: 'Okay', color: '#6AC0C0' },
            { icon: 'ðŸ˜Š', label: 'Hopeful', color: '#FFD166' },
            { icon: 'ðŸ¤”', label: 'Confused', color: '#8AC926' },
            { icon: 'ðŸ˜Œ', label: 'Relieved', color: '#118AB2' },
            { icon: 'ðŸ˜–', label: 'Overwhelmed', color: '#EF476F' },
            { icon: 'ðŸ’ª', label: 'Strong', color: '#06D6A0' }
        ];

        // Prompts
        const prompts = [
            "What's on your mind today? You're safe here.",
            "Write what you can't say out loud.",
            "What burden would you like to release?",
            "Speak your truth without fear.",
            "What needs to be heard, even anonymously?",
            "Release what's weighing on your heart.",
            "Share what you've been holding inside.",
            "What story needs to be told today?"
        ];

        // DOM Elements
        const confessionInput = document.getElementById('confessionInput');
        const wordCount = document.getElementById('wordCount');
        const emotionGrid = document.getElementById('emotionGrid');
        const archiveGrid = document.getElementById('archiveGrid');
        const totalReleases = document.getElementById('totalReleases');
        const thisMonth = document.getElementById('thisMonth');
        const avgLength = document.getElementById('avgLength');
        const currentPrompt = document.getElementById('currentPrompt');

        // State
        let selectedEmotion = null;
        let selectedOption = 'encrypt';
        let releases = JSON.parse(localStorage.getItem('confessionalReleases') || '[]');
        let drafts = JSON.parse(localStorage.getItem('confessionalDrafts') || '[]');

        // Initialize
        function init() {
            // Load random prompt
            const randomPrompt = prompts[Math.floor(Math.random() * prompts.length)];
            currentPrompt.textContent = randomPrompt;
            
            // Populate emotions
            emotions.forEach(emotion => {
                const emotionEl = document.createElement('div');
                emotionEl.className = 'emotion-option';
                emotionEl.innerHTML = `
                    <div class="emotion-icon">${emotion.icon}</div>
                    <div>${emotion.label}</div>
                `;
                emotionEl.addEventListener('click', () => selectEmotion(emotionEl, emotion));
                emotionGrid.appendChild(emotionEl);
            });
            
            // Setup release options
            document.querySelectorAll('.release-option').forEach(option => {
                option.addEventListener('click', () => {
                    document.querySelectorAll('.release-option').forEach(o => o.classList.remove('selected'));
                    option.classList.add('selected');
                    selectedOption = option.getAttribute('data-option');
                });
            });
            
            // Word count tracking
            confessionInput.addEventListener('input', updateWordCount);
            
            // Load archive
            loadArchive();
            
            // Update statistics
            updateStatistics();
        }

        // Emotion selection
        function selectEmotion(element, emotion) {
            document.querySelectorAll('.emotion-option').forEach(el => el.classList.remove('selected'));
            element.classList.add('selected');
            selectedEmotion = emotion;
        }

        // Update word count
        function updateWordCount() {
            const text = confessionInput.value.trim();
            const words = text ? text.split(/\s+/).length : 0;
            wordCount.textContent = words;
        }

        // Text formatting
        function formatText(type) {
            const input = confessionInput;
            const start = input.selectionStart;
            const end = input.selectionEnd;
            const selectedText = input.value.substring(start, end);
            
            let formattedText = '';
            switch(type) {
                case 'bold':
                    formattedText = `**${selectedText}**`;
                    break;
                case 'italic':
                    formattedText = `*${selectedText}*`;
                    break;
            }
            
            input.value = input.value.substring(0, start) + formattedText + input.value.substring(end);
            input.focus();
            updateWordCount();
        }

        function clearText() {
            if (confessionInput.value.trim() && !confirm('Clear your writing?')) {
                return;
            }
            confessionInput.value = '';
            updateWordCount();
        }

        // Save draft
        function saveDraft() {
            const text = confessionInput.value.trim();
            if (!text) {
                showNotification('Write something to save as draft.');
                return;
            }
            
            const draft = {
                id: Date.now(),
                text: text,
                emotion: selectedEmotion,
                date: new Date().toISOString(),
                wordCount: text.split(/\s+/).length
            };
            
            drafts.unshift(draft);
            localStorage.setItem('confessionalDrafts', JSON.stringify(drafts));
            
            showNotification('Draft saved. You can continue later.');
        }

        // Release confession
        function releaseConfession() {
            const text = confessionInput.value.trim();
            if (!text) {
                showNotification('Write something to release.');
                return;
            }
            
            if (!selectedEmotion && !confirm('Release without selecting an emotion?')) {
                return;
            }
            
            // Create release object
            const release = {
                id: Date.now(),
                text: text,
                emotion: selectedEmotion,
                option: selectedOption,
                date: new Date().toISOString(),
                wordCount: text.split(/\s+/).length,
                encrypted: true
            };
            
            // Add to releases
            releases.unshift(release);
            localStorage.setItem('confessionalReleases', JSON.stringify(releases));
            
            // Clear input
            confessionInput.value = '';
            updateWordCount();
            document.querySelectorAll('.emotion-option').forEach(el => el.classList.remove('selected'));
            selectedEmotion = null;
            
            // Show encryption animation
            showEncryptionAnimation();
            
            // Update display
            setTimeout(() => {
                loadArchive();
                updateStatistics();
                showNotification('Released and encrypted. Thank you for sharing.');
            }, 1500);
        }

        // Show encryption animation
        function showEncryptionAnimation() {
            const animation = document.createElement('div');
            animation.className = 'encryption-animation';
            animation.style.cssText = `
                position: fixed;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                width: 300px;
                height: 100px;
                border-radius: 20px;
                background: rgba(10, 10, 26, 0.95);
                backdrop-filter: blur(10px);
                display: flex;
                flex-direction: column;
                align-items: center;
                justify-content: center;
                z-index: 10000;
                border: 2px solid var(--primary-soul);
            `;
            
            animation.innerHTML = `
                <div style="font-size: 2rem; margin-bottom: 1rem;">ðŸ”’</div>
                <div style="color: var(--calm-mind); font-weight: bold; margin-bottom: 0.5rem;">
                    Encrypting Release...
                </div>
                <div style="width: 200px; height: 4px; background: rgba(255,255,255,0.1); border-radius: 2px; overflow: hidden;">
                    <div style="height: 100%; width: 0%; background: linear-gradient(90deg, var(--primary-soul), var(--calm-mind)); 
                         animation: fill 1.5s ease-in-out forwards;"></div>
                </div>
                <style>
                    @keyframes fill { to { width: 100%; } }
                </style>
            `;
            
            document.body.appendChild(animation);
            
            setTimeout(() => {
                animation.style.animation = 'fadeOut 0.3s ease';
                setTimeout(() => animation.remove(), 300);
            }, 1500);
        }

        // Load archive
        function loadArchive() {
            archiveGrid.innerHTML = '';
            
            if (releases.length === 0) {
                archiveGrid.innerHTML = `
                    <div style="grid-column: 1 / -1; text-align: center; padding: 3rem; color: rgba(255,255,255,0.6);">
                        <i class="fas fa-inbox" style="font-size: 3rem; margin-bottom: 1rem; opacity: 0.5;"></i>
                        <div>No releases yet. Your first release will appear here.</div>
                    </div>
                `;
                return;
            }
            
            // Show only recent releases
            const recentReleases = releases.slice(0, 6);
            
            recentReleases.forEach(release => {
                const archiveEl = document.createElement('div');
                archiveEl.className = 'archive-item';
                
                // Format date
                const date = new Date(release.date);
                const formattedDate = date.toLocaleDateString('en-US', {
                    month: 'short',
                    day: 'numeric',
                    hour: '2-digit',
                    minute: '2-digit'
                });
                
                // Truncate text
                const maxLength = 100;
                const displayText = release.text.length > maxLength 
                    ? release.text.substring(0, maxLength) + '...' 
                    : release.text;
                
                archiveEl.innerHTML = `
                    ${release.emotion ? `<div class="archive-emotion">${release.emotion.icon}</div>` : ''}
                    <div class="archive-date">${formattedDate}</div>
                    <div style="margin-bottom: 1rem; color: rgba(255,255,255,0.9);">
                        ${displayText}
                    </div>
                    <div style="display: flex; justify-content: space-between; font-size: 0.8rem;">
                        <span style="color: var(--calm-mind);">${release.wordCount} words</span>
                        <span style="color: rgba(255,255,255,0.6);">${release.option}</span>
                    </div>
                `;
                
                archiveGrid.appendChild(archiveEl);
            });
        }

        // Update statistics
        function updateStatistics() {
            totalReleases.textContent = releases.length;
            
            // This month's releases
            const now = new Date();
            const thisMonthReleases = releases.filter(r => {
                const releaseDate = new Date(r.date);
                return releaseDate.getMonth() === now.getMonth() && 
                       releaseDate.getFullYear() === now.getFullYear();
            }).length;
            thisMonth.textContent = thisMonthReleases;
            
            // Average length
            if (releases.length > 0) {
                const totalWords = releases.reduce((sum, r) => sum + r.wordCount, 0);
                avgLength.textContent = Math.round(totalWords / releases.length);
            }
        }

        // Clear archive
        function clearArchive() {
            if (!confirm('Permanently delete all your releases? This cannot be undone.')) {
                return;
            }
            
            releases = [];
            localStorage.setItem('confessionalReleases', JSON.stringify(releases));
            loadArchive();
            updateStatistics();
            showNotification('All releases have been deleted.');
        }

        // Helper functions
        function showNotification(message) {
            const notification = document.createElement('div');
            notification.textContent = message;
            notification.style.cssText = `
                position: fixed;
                bottom: 20px;
                right: 20px;
                background: rgba(10, 10, 26, 0.95);
                backdrop-filter: blur(10px);
                color: var(--calm-mind);
                padding: 1rem 1.5rem;
                border-radius: 15px;
                border-left: 4px solid var(--primary-soul);
                z-index: 10000;
                max-width: 300px;
                animation: slideIn 0.3s ease;
            `;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.animation = 'slideOut 0.3s ease';
                setTimeout(() => notification.remove(), 300);
            }, 3000);
        }

        // Initialize on load
        document.addEventListener('DOMContentLoaded', init);

        // Add animation styles
        const style = document.createElement('style');
        style.textContent = `
            @keyframes slideIn {
                from { transform: translateX(100%); opacity: 0; }
                to { transform: translateX(0); opacity: 1; }
            }
            @keyframes slideOut {
                from { transform: translateX(0); opacity: 1; }
                to { transform: translateX(100%); opacity: 0; }
            }
            @keyframes fadeOut {
                from { opacity: 1; }
                to { opacity: 0; }
            }
        `;
        document.head.appendChild(style);
    </script>
</body>
</html>
