<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Dashboard | Psychezone International</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary-soul: #5D3FD3;
            --calm-mind: #6AC0C0;
            --hope-glow: #FF9A76;
            --dark-sanctuary: #0A0A1A;
            --light-bg: #F8F9FF;
            --transition: all 0.3s ease;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: var(--dark-sanctuary);
            color: white;
            min-height: 100vh;
        }

        /* Dashboard Layout */
        .dashboard-container {
            display: flex;
            min-height: 100vh;
        }

        /* Sidebar */
        .dashboard-sidebar {
            width: 250px;
            background: rgba(10, 10, 26, 0.95);
            backdrop-filter: blur(10px);
            padding: 2rem 1rem;
            border-right: 1px solid rgba(255, 255, 255, 0.1);
            position: fixed;
            height: 100vh;
            overflow-y: auto;
            z-index: 1000;
        }

        .sidebar-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 2rem;
            padding: 0 1rem;
        }

        .sidebar-logo {
            font-size: 1.5rem;
            color: var(--primary-soul);
        }

        .sidebar-nav {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .sidebar-link {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1rem 1.5rem;
            color: rgba(255, 255, 255, 0.7);
            text-decoration: none;
            border-radius: 15px;
            transition: var(--transition);
            cursor: pointer;
            border: none;
            background: none;
            text-align: left;
            font-size: 1rem;
        }

        .sidebar-link:hover, .sidebar-link.active {
            background: rgba(93, 63, 211, 0.2);
            color: white;
            transform: translateX(5px);
        }

        .sidebar-link i {
            width: 20px;
            text-align: center;
        }

        /* Main Content */
        .dashboard-main {
            flex: 1;
            margin-left: 250px;
            padding: 2rem;
            min-height: 100vh;
        }

        .dashboard-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .welcome-message h1 {
            font-size: 2rem;
            background: linear-gradient(to right, white, var(--calm-mind));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }

        .welcome-message p {
            color: rgba(255, 255, 255, 0.7);
        }

        .user-avatar {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: linear-gradient(45deg, var(--primary-soul), var(--calm-mind));
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            font-weight: bold;
            color: white;
            cursor: pointer;
            transition: var(--transition);
        }

        .user-avatar:hover {
            transform: scale(1.1);
        }

        /* Dashboard Sections */
        .dashboard-section {
            display: none;
            animation: fadeIn 0.5s ease;
        }

        .dashboard-section.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Overview Section */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-bottom: 3rem;
        }

        .stat-card {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 1.5rem;
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: var(--transition);
            position: relative;
            overflow: hidden;
        }

        .stat-card:hover {
            transform: translateY(-5px);
            border-color: var(--primary-soul);
            background: rgba(255, 255, 255, 0.08);
        }

        .stat-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .stat-icon {
            width: 50px;
            height: 50px;
            border-radius: 12px;
            background: rgba(93, 63, 211, 0.2);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            color: var(--primary-soul);
        }

        .stat-value {
            font-size: 2.5rem;
            font-weight: bold;
            background: linear-gradient(to right, var(--primary-soul), var(--calm-mind));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }

        .stat-label {
            color: rgba(255, 255, 255, 0.6);
            font-size: 0.9rem;
        }

        .stat-trend {
            position: absolute;
            bottom: 1rem;
            right: 1.5rem;
            font-size: 0.8rem;
            font-weight: bold;
        }

        .trend-up { color: var(--calm-mind); }
        .trend-down { color: var(--hope-glow); }

        /* Progress Chart */
        .progress-chart {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 2rem;
            margin-bottom: 2rem;
        }

        .progress-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }

        .progress-bars {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }

        .progress-item {
            margin-bottom: 1rem;
        }

        .progress-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 0.5rem;
            color: rgba(255, 255, 255, 0.8);
        }

        .progress-bar {
            height: 10px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 5px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary-soul), var(--calm-mind));
            border-radius: 5px;
            transition: width 1s ease;
        }

        /* Sessions Section */
        .sessions-list {
            display: flex;
            flex-direction: column;
            gap: 1rem;
            margin-top: 1.5rem;
        }

        .session-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1.5rem;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            border-left: 4px solid transparent;
            transition: var(--transition);
        }

        .session-item:hover {
            background: rgba(255, 255, 255, 0.08);
            transform: translateX(5px);
        }

        .session-info {
            flex: 1;
        }

        .session-title {
            font-weight: bold;
            margin-bottom: 0.5rem;
            color: var(--calm-mind);
        }

        .session-meta {
            display: flex;
            gap: 1rem;
            color: rgba(255, 255, 255, 0.6);
            font-size: 0.9rem;
        }

        .session-status {
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: bold;
        }

        .status-upcoming { 
            background: rgba(106, 192, 192, 0.2); 
            color: var(--calm-mind); 
            border: 1px solid var(--calm-mind);
        }
        .status-completed { 
            background: rgba(93, 63, 211, 0.2); 
            color: #b19eff; 
            border: 1px solid var(--primary-soul);
        }
        .status-missed { 
            background: rgba(255, 154, 118, 0.2); 
            color: var(--hope-glow); 
            border: 1px solid var(--hope-glow);
        }

        .session-actions {
            display: flex;
            gap: 0.5rem;
        }

        .session-btn {
            padding: 0.5rem 1rem;
            border-radius: 10px;
            border: none;
            cursor: pointer;
            transition: var(--transition);
            font-weight: 600;
        }

        .btn-prepare {
            background: rgba(106, 192, 192, 0.2);
            color: var(--calm-mind);
            border: 1px solid var(--calm-mind);
        }

        .btn-prepare:hover {
            background: rgba(106, 192, 192, 0.4);
            transform: translateY(-2px);
        }

        .btn-notes {
            background: rgba(93, 63, 211, 0.2);
            color: #b19eff;
            border: 1px solid var(--primary-soul);
        }

        .btn-notes:hover {
            background: rgba(93, 63, 211, 0.4);
            transform: translateY(-2px);
        }

        /* Goals Section */
        .goals-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
            margin-top: 1.5rem;
        }

        .goal-card {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 1.5rem;
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: var(--transition);
        }

        .goal-card:hover {
            transform: translateY(-5px);
            border-color: var(--primary-soul);
        }

        .goal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .goal-icon {
            width: 40px;
            height: 40px;
            border-radius: 10px;
            background: rgba(255, 154, 118, 0.2);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--hope-glow);
        }

        .goal-progress {
            margin: 1rem 0;
        }

        .goal-milestones {
            list-style: none;
            margin-top: 1rem;
        }

        .goal-milestones li {
            padding: 0.5rem 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .goal-milestones li.completed {
            color: var(--calm-mind);
        }

        /* Resources Section */
        .resources-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-top: 1.5rem;
        }

        .resource-card {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 1.5rem;
            text-align: center;
            transition: var(--transition);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .resource-card:hover {
            transform: translateY(-5px);
            border-color: var(--primary-soul);
            background: rgba(255, 255, 255, 0.08);
        }

        .resource-icon {
            font-size: 2.5rem;
            color: var(--primary-soul);
            margin-bottom: 1rem;
        }

        .resource-btn {
            display: inline-block;
            margin-top: 1rem;
            padding: 0.8rem 1.5rem;
            background: rgba(93, 63, 211, 0.2);
            color: white;
            border-radius: 10px;
            text-decoration: none;
            font-weight: 600;
            transition: var(--transition);
        }

        .resource-btn:hover {
            background: rgba(93, 63, 211, 0.4);
            transform: translateY(-2px);
        }

        /* AI Assistant */
        .ai-chat {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 1.5rem;
            margin-top: 1.5rem;
            height: 300px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .ai-message, .user-message {
            max-width: 80%;
            padding: 1rem;
            border-radius: 15px;
        }

        .ai-message {
            background: rgba(93, 63, 211, 0.2);
            align-self: flex-start;
        }

        .user-message {
            background: rgba(106, 192, 192, 0.2);
            align-self: flex-end;
        }

        .ai-input {
            display: flex;
            gap: 1rem;
            margin-top: 1rem;
        }

        .ai-input input {
            flex: 1;
            padding: 1rem;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            color: white;
        }

        .ai-input button {
            padding: 1rem 1.5rem;
            background: var(--primary-soul);
            color: white;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 600;
        }

        /* Quick Actions */
        .quick-actions {
            display: flex;
            gap: 1rem;
            margin-top: 2rem;
            flex-wrap: wrap;
        }

        .action-btn {
            flex: 1;
            min-width: 200px;
            padding: 1rem;
            background: rgba(255, 255, 255, 0.05);
            border: 2px solid transparent;
            border-radius: 15px;
            color: white;
            text-align: center;
            text-decoration: none;
            transition: var(--transition);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.8rem;
        }

        .action-btn:hover {
            border-color: var(--primary-soul);
            background: rgba(93, 63, 211, 0.1);
            transform: translateY(-3px);
        }

        /* Section Headers */
        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 10000;
            align-items: center;
            justify-content: center;
            padding: 1rem;
        }

        .modal.active {
            display: flex;
            animation: fadeIn 0.3s ease;
        }

        .modal-content {
            background: var(--dark-sanctuary);
            border-radius: 20px;
            max-width: 500px;
            width: 100%;
            padding: 2rem;
            border: 1px solid rgba(255, 255, 255, 0.1);
            animation: modalSlide 0.3s ease;
        }

        @keyframes modalSlide {
            from { transform: translateY(-20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }

        .modal-close {
            background: transparent;
            border: none;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: var(--transition);
        }

        .modal-close:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        /* Progress History */
        .progress-history-item {
            padding: 1rem;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .progress-history-date {
            font-size: 0.8rem;
            color: rgba(255, 255, 255, 0.6);
            min-width: 100px;
        }

        /* Toast Notifications */
        .toast {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            padding: 1rem 1.5rem;
            background: var(--primary-soul);
            color: white;
            border-radius: 10px;
            z-index: 10001;
            transform: translateY(100px);
            opacity: 0;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }

        .toast.show {
            transform: translateY(0);
            opacity: 1;
        }

        /* User Menu */
        .user-menu {
            position: fixed;
            top: 5rem;
            right: 2rem;
            background: rgba(10, 10, 26, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 10px;
            padding: 1rem;
            min-width: 200px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            display: none;
            z-index: 1000;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.3);
        }

        .user-menu.active {
            display: block;
            animation: fadeIn 0.3s ease;
        }

        .user-menu-item {
            padding: 0.8rem 1rem;
            display: flex;
            align-items: center;
            gap: 0.8rem;
            color: rgba(255, 255, 255, 0.8);
            text-decoration: none;
            border-radius: 8px;
            transition: var(--transition);
            cursor: pointer;
            border: none;
            background: none;
            width: 100%;
            text-align: left;
        }

        .user-menu-item:hover {
            background: rgba(255, 255, 255, 0.1);
            color: white;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .dashboard-sidebar {
                width: 70px;
                padding: 1rem 0.5rem;
            }
            
            .sidebar-link span {
                display: none;
            }
            
            .dashboard-main {
                margin-left: 70px;
                padding: 1rem;
            }
            
            .stats-grid {
                grid-template-columns: 1fr;
            }
            
            .session-item {
                flex-direction: column;
                gap: 1rem;
                align-items: flex-start;
            }
            
            .session-actions {
                width: 100%;
                justify-content: flex-end;
            }
            
            .quick-actions {
                flex-direction: column;
            }

            .modal-content {
                margin: 1rem;
            }
        }
    </style>
</head>
<body>
    <div class="dashboard-container">
        <!-- Sidebar -->
        <aside class="dashboard-sidebar">
            <div class="sidebar-header">
                <i class="fas fa-brain sidebar-logo"></i>
                <span style="font-weight: bold; color: white;">DASHBOARD</span>
            </div>
            
            <nav class="sidebar-nav">
                <button class="sidebar-link active" data-section="overview">
                    <i class="fas fa-home"></i>
                    <span>Overview</span>
                </button>
                <button class="sidebar-link" data-section="progress">
                    <i class="fas fa-chart-line"></i>
                    <span>Progress</span>
                </button>
                <button class="sidebar-link" data-section="sessions">
                    <i class="fas fa-calendar-alt"></i>
                    <span>Sessions</span>
                </button>
                <button class="sidebar-link" data-section="goals">
                    <i class="fas fa-bullseye"></i>
                    <span>Goals</span>
                </button>
                <button class="sidebar-link" data-section="resources">
                    <i class="fas fa-book"></i>
                    <span>Resources</span>
                </button>
                <button class="sidebar-link" data-section="ai">
                    <i class="fas fa-robot"></i>
                    <span>AI Assistant</span>
                </button>
                <div style="margin-top: 2rem; padding-top: 2rem; border-top: 1px solid rgba(255,255,255,0.1);">
                    <a href="index.html" class="sidebar-link">
                        <i class="fas fa-globe"></i>
                        <span>Main Site</span>
                    </a>
                    <a href="therapies.html" class="sidebar-link">
                        <i class="fas fa-heartbeat"></i>
                        <span>Therapies</span>
                    </a>
                    <a href="voice-tools.html" class="sidebar-link">
                        <i class="fas fa-microphone-alt"></i>
                        <span>Voice Tools</span>
                    </a>
                </div>
            </nav>
        </aside>

        <!-- Main Content -->
        <main class="dashboard-main">
            <!-- Header -->
            <div class="dashboard-header">
                <div class="welcome-message">
                    <h1 id="welcomeTitle">Welcome back!</h1>
                    <p id="welcomeSubtitle">Your mental wellness journey</p>
                </div>
                <div class="user-avatar" onclick="toggleUserMenu()" id="userAvatar">
                    U
                </div>
            </div>

            <!-- Overview Section -->
            <section class="dashboard-section active" id="overviewSection">
                <!-- Stats Grid -->
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-header">
                            <div class="stat-icon">
                                <i class="fas fa-calendar-check"></i>
                            </div>
                            <div class="stat-value" id="totalSessions">12</div>
                        </div>
                        <div class="stat-label">Total Sessions</div>
                        <div class="stat-trend trend-up" id="nextSession">Tomorrow 3 PM</div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-header">
                            <div class="stat-icon">
                                <i class="fas fa-chart-line"></i>
                            </div>
                            <div class="stat-value" id="progressScore">65%</div>
                        </div>
                        <div class="stat-label">Progress Score</div>
                        <div class="stat-trend trend-up">+12%</div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-header">
                            <div class="stat-icon">
                                <i class="fas fa-brain"></i>
                            </div>
                            <div class="stat-value" id="mindfulnessMinutes">24</div>
                        </div>
                        <div class="stat-label">Mindfulness Minutes</div>
                        <div class="stat-trend trend-up">+5 this week</div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-header">
                            <div class="stat-icon">
                                <i class="fas fa-heart"></i>
                            </div>
                            <div class="stat-value" id="averageMood">7.8</div>
                        </div>
                        <div class="stat-label">Average Mood</div>
                        <div class="stat-trend trend-up">Improving</div>
                    </div>
                </div>

                <!-- Quick Progress Overview -->
                <div class="progress-chart">
                    <div class="section-header">
                        <h3 style="color: var(--calm-mind);">
                            <i class="fas fa-chart-line"></i> Quick Progress Overview
                        </h3>
                        <button onclick="showFullProgress()" style="background: rgba(93, 63, 211, 0.2); 
                               color: white; border: 1px solid var(--primary-soul); padding: 0.5rem 1rem; 
                               border-radius: 10px; cursor: pointer;">
                            View Details
                        </button>
                    </div>
                    
                    <div class="progress-bars">
                        <div class="progress-item">
                            <div class="progress-label">
                                <span>Anxiety Management</span>
                                <span id="anxietyProgress">75%</span>
                            </div>
                            <div class="progress-bar">
                                <div class="progress-fill" id="anxietyBar" style="width: 75%;"></div>
                            </div>
                        </div>
                        
                        <div class="progress-item">
                            <div class="progress-label">
                                <span>Sleep Quality</span>
                                <span id="sleepProgress">60%</span>
                            </div>
                            <div class="progress-bar">
                                <div class="progress-fill" id="sleepBar" style="width: 60%;"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Quick Actions -->
                <div class="quick-actions">
                    <a href="voice-tools.html" class="action-btn">
                        <i class="fas fa-microphone-alt"></i>
                        Voice Wellness Tools
                    </a>
                    <a href="confessional.html" class="action-btn">
                        <i class="fas fa-user-secret"></i>
                        Anonymous Release
                    </a>
                    <a href="workshops.html" class="action-btn">
                        <i class="fas fa-users"></i>
                        Join Workshop
                    </a>
                    <a href="contact.html" class="action-btn">
                        <i class="fas fa-calendar-plus"></i>
                        Book Session
                    </a>
                </div>
            </section>

            <!-- Progress Section -->
            <section class="dashboard-section" id="progressSection">
                <div class="section-header">
                    <h3 style="color: var(--calm-mind);">
                        <i class="fas fa-chart-line"></i> Detailed Progress Tracking
                    </h3>
                    <button onclick="updateProgress()" style="background: rgba(93, 63, 211, 0.2); 
                           color: white; border: 1px solid var(--primary-soul); padding: 0.5rem 1rem; 
                           border-radius: 10px; cursor: pointer;">
                        Update Progress
                    </button>
                </div>
                
                <div class="progress-chart">
                    <div class="progress-bars">
                        <div class="progress-item">
                            <div class="progress-label">
                                <span>Anxiety Management</span>
                                <span id="detailedAnxietyProgress">75%</span>
                            </div>
                            <div class="progress-bar">
                                <div class="progress-fill" id="detailedAnxietyBar" style="width: 75%;"></div>
                            </div>
                        </div>
                        
                        <div class="progress-item">
                            <div class="progress-label">
                                <span>Sleep Quality</span>
                                <span id="detailedSleepProgress">60%</span>
                            </div>
                            <div class="progress-bar">
                                <div class="progress-fill" id="detailedSleepBar" style="width: 60%;"></div>
                            </div>
                        </div>
                        
                        <div class="progress-item">
                            <div class="progress-label">
                                <span>Stress Reduction</span>
                                <span id="detailedStressProgress">85%</span>
                            </div>
                            <div class="progress-bar">
                                <div class="progress-fill" id="detailedStressBar" style="width: 85%;"></div>
                            </div>
                        </div>
                        
                        <div class="progress-item">
                            <div class="progress-label">
                                <span>Mood Stability</span>
                                <span id="detailedMoodProgress">70%</span>
                            </div>
                            <div class="progress-bar">
                                <div class="progress-fill" id="detailedMoodBar" style="width: 70%;"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="progress-chart" style="margin-top: 2rem;">
                    <h4 style="color: var(--calm-mind); margin-bottom: 1rem;">
                        <i class="fas fa-history"></i> Progress History
                    </h4>
                    <div id="progressHistory">
                        <!-- Progress history will be populated here -->
                    </div>
                </div>
            </section>

            <!-- Sessions Section -->
            <section class="dashboard-section" id="sessionsSection">
                <div class="section-header">
                    <h3 style="color: var(--calm-mind);">
                        <i class="fas fa-calendar-alt"></i> Your Therapy Sessions
                    </h3>
                    <button onclick="addSession()" style="background: rgba(106, 192, 192, 0.2); 
                           color: var(--calm-mind); border: 1px solid var(--calm-mind); 
                           padding: 0.5rem 1rem; border-radius: 10px; cursor: pointer;">
                        + Add Session
                    </button>
                </div>
                
                <div class="sessions-list" id="sessionsList">
                    <!-- Sessions will be populated by JavaScript -->
                </div>
            </section>

            <!-- Goals Section -->
            <section class="dashboard-section" id="goalsSection">
                <div class="section-header">
                    <h3 style="color: var(--hope-glow);">
                        <i class="fas fa-bullseye"></i> Your Wellness Goals
                    </h3>
                    <button onclick="addGoal()" style="background: rgba(255, 154, 118, 0.2); 
                           color: var(--hope-glow); border: 1px solid var(--hope-glow); 
                           padding: 0.5rem 1rem; border-radius: 10px; cursor: pointer;">
                        + New Goal
                    </button>
                </div>
                
                <div class="goals-grid" id="goalsGrid">
                    <!-- Goals will be populated by JavaScript -->
                </div>
            </section>

            <!-- Resources Section -->
            <section class="dashboard-section" id="resourcesSection">
                <div class="section-header">
                    <h3 style="color: var(--primary-soul);">
                        <i class="fas fa-book"></i> Wellness Resources
                    </h3>
                    <button onclick="refreshResources()" style="background: rgba(93, 63, 211, 0.2); 
                           color: white; border: 1px solid var(--primary-soul); 
                           padding: 0.5rem 1rem; border-radius: 10px; cursor: pointer;">
                        Refresh
                    </button>
                </div>
                
                <div class="resources-grid" id="resourcesGrid">
                    <!-- Resources will be populated by JavaScript -->
                </div>
            </section>

            <!-- AI Assistant Section -->
            <section class="dashboard-section" id="aiSection">
                <div class="section-header">
                    <h3 style="color: var(--primary-soul);">
                        <i class="fas fa-robot"></i> AI Wellness Assistant
                    </h3>
                    <button onclick="clearAIChat()" style="background: rgba(93, 63, 211, 0.2); 
                           color: white; border: 1px solid var(--primary-soul); 
                           padding: 0.5rem 1rem; border-radius: 10px; cursor: pointer;">
                        Clear Chat
                    </button>
                </div>
                
                <div class="ai-chat" id="aiChat">
                    <!-- AI chat messages will appear here -->
                </div>
                
                <div class="ai-input">
                    <input type="text" id="aiMessageInput" placeholder="Ask me anything about your wellness journey..." onkeypress="if(event.key === 'Enter') sendAIMessage()">
                    <button onclick="sendAIMessage()">Send</button>
                </div>
            </section>
        </main>
    </div>

    <!-- User Menu -->
    <div class="user-menu" id="userMenu">
        <button class="user-menu-item" onclick="showToast('Opening profile...')">
            <i class="fas fa-user"></i> My Profile
        </button>
        <button class="user-menu-item" onclick="showToast('Opening settings...')">
            <i class="fas fa-cog"></i> Settings
        </button>
        <button class="user-menu-item" onclick="showToast('Saved to cloud!')">
            <i class="fas fa-cloud-upload-alt"></i> Backup Data
        </button>
        <div style="border-top: 1px solid rgba(255,255,255,0.1); margin: 0.5rem 0;"></div>
        <button class="user-menu-item" onclick="showToast('Logged out successfully')">
            <i class="fas fa-sign-out-alt"></i> Logout
        </button>
    </div>

    <!-- Session Notes Modal -->
    <div class="modal" id="sessionNotesModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 style="color: var(--calm-mind);">Session Notes</h3>
                <button class="modal-close" onclick="closeModal('sessionNotesModal')">×</button>
            </div>
            <div id="notesContent">
                <!-- Notes will be populated here -->
            </div>
        </div>
    </div>

    <!-- Add Session Modal -->
    <div class="modal" id="addSessionModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 style="color: var(--calm-mind);">Add New Session</h3>
                <button class="modal-close" onclick="closeModal('addSessionModal')">×</button>
            </div>
            <div style="margin-top: 1.5rem;">
                <div style="margin-bottom: 1rem;">
                    <label style="display: block; margin-bottom: 0.5rem;">Session Type</label>
                    <select id="sessionType" style="width: 100%; padding: 0.8rem; background: rgba(255,255,255,0.1); 
                           border: 1px solid rgba(255,255,255,0.2); border-radius: 10px; color: white;">
                        <option value="cbt">CBT Therapy</option>
                        <option value="trauma">Trauma Therapy</option>
                        <option value="couples">Couples Therapy</option>
                        <option value="group">Group Session</option>
                    </select>
                </div>
                <div style="margin-bottom: 1rem;">
                    <label style="display: block; margin-bottom: 0.5rem;">Date & Time</label>
                    <input type="datetime-local" id="sessionDateTime" style="width: 100%; padding: 0.8rem; 
                           background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.2); 
                           border-radius: 10px; color: white;">
                </div>
                <button onclick="saveNewSession()" style="width: 100%; padding: 1rem; background: var(--primary-soul); 
                       color: white; border: none; border-radius: 10px; cursor: pointer; font-weight: bold;">
                    Save Session
                </button>
            </div>
        </div>
    </div>

    <!-- Add Goal Modal -->
    <div class="modal" id="addGoalModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 style="color: var(--hope-glow);">Set New Goal</h3>
                <button class="modal-close" onclick="closeModal('addGoalModal')">×</button>
            </div>
            <div style="margin-top: 1.5rem;">
                <div style="margin-bottom: 1rem;">
                    <label style="display: block; margin-bottom: 0.5rem;">Goal Title</label>
                    <input type="text" id="goalTitle" placeholder="e.g., Improve sleep quality" 
                           style="width: 100%; padding: 0.8rem; background: rgba(255,255,255,0.1); 
                           border: 1px solid rgba(255,255,255,0.2); border-radius: 10px; color: white;">
                </div>
                <div style="margin-bottom: 1rem;">
                    <label style="display: block; margin-bottom: 0.5rem;">Target Date</label>
                    <input type="date" id="goalDate" style="width: 100%; padding: 0.8rem; 
                           background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.2); 
                           border-radius: 10px; color: white;">
                </div>
                <button onclick="saveNewGoal()" style="width: 100%; padding: 1rem; background: var(--hope-glow); 
                       color: white; border: none; border-radius: 10px; cursor: pointer; font-weight: bold;">
                    Create Goal
                </button>
            </div>
        </div>
    </div>

    <!-- Toast Notification -->
    <div class="toast" id="toast"></div>

    <script>
        // ================== DASHBOARD STATE ==================
        const dashboardState = {
            userName: "User",
            totalSessions: 12,
            progressScore: 65,
            mindfulnessMinutes: 24,
            averageMood: 7.8,
            nextSession: new Date(Date.now() + 24 * 60 * 60 * 1000), // Tomorrow
            sessions: [],
            goals: [],
            resources: [],
            aiChat: [],
            progressHistory: []
        };

        // ================== INITIALIZATION ==================
        document.addEventListener('DOMContentLoaded', function() {
            initializeDashboard();
            setupNavigation();
            loadMockData();
            updateWelcomeMessage();
            updateStats();
            renderSessions();
            renderGoals();
            renderResources();
            renderProgressHistory();
            initializeAIChat();
            
            // Close modals when clicking outside
            document.addEventListener('click', function(event) {
                if (event.target.classList.contains('modal')) {
                    closeAllModals();
                }
            });
            
            // Close user menu when clicking outside
            document.addEventListener('click', function(event) {
                const userMenu = document.getElementById('userMenu');
                const userAvatar = document.getElementById('userAvatar');
                
                if (!userMenu.contains(event.target) && !userAvatar.contains(event.target)) {
                    userMenu.classList.remove('active');
                }
            });
        });

        // ================== DASHBOARD FUNCTIONS ==================
        function initializeDashboard() {
            // Set initial welcome message
            const hour = new Date().getHours();
            let greeting = "Good evening";
            if (hour < 12) greeting = "Good morning";
            else if (hour < 18) greeting = "Good afternoon";
            
            document.getElementById('welcomeTitle').textContent = `${greeting}, ${dashboardState.userName}!`;
        }

        function setupNavigation() {
            // Set up sidebar navigation
            document.querySelectorAll('.sidebar-link[data-section]').forEach(link => {
                link.addEventListener('click', function() {
                    // Remove active class from all links
                    document.querySelectorAll('.sidebar-link').forEach(l => l.classList.remove('active'));
                    // Add active class to clicked link
                    this.classList.add('active');
                    
                    // Hide all sections
                    document.querySelectorAll('.dashboard-section').forEach(section => {
                        section.classList.remove('active');
                    });
                    
                    // Show selected section
                    const sectionId = this.getAttribute('data-section') + 'Section';
                    document.getElementById(sectionId).classList.add('active');
                });
            });
        }

        function updateWelcomeMessage() {
            const hour = new Date().getHours();
            let greeting = "Good evening";
            let subtitle = "Rest and recharge for tomorrow";
            
            if (hour < 12) {
                greeting = "Good morning";
                subtitle = "Start your day with mindfulness";
            } else if (hour < 18) {
                greeting = "Good afternoon";
                subtitle = "Keep up the great work";
            }
            
            document.getElementById('welcomeTitle').textContent = `${greeting}, ${dashboardState.userName}!`;
            document.getElementById('welcomeSubtitle').textContent = subtitle;
        }

        function updateStats() {
            document.getElementById('totalSessions').textContent = dashboardState.totalSessions;
            document.getElementById('progressScore').textContent = dashboardState.progressScore + '%';
            document.getElementById('mindfulnessMinutes').textContent = dashboardState.mindfulnessMinutes;
            document.getElementById('averageMood').textContent = dashboardState.averageMood.toFixed(1);
            
            // Format next session
            const nextSessionDate = new Date(dashboardState.nextSession);
            const options = { 
                weekday: 'long', 
                hour: 'numeric', 
                minute: '2-digit',
                hour12: true 
            };
            const formattedDate = nextSessionDate.toLocaleDateString('en-US', options);
            document.getElementById('nextSession').textContent = formattedDate;
        }

        // ================== SESSIONS MANAGEMENT ==================
        function loadMockSessions() {
            const mockSessions = [
                {
                    id: 1,
                    title: "CBT Therapy Session",
                    date: new Date(Date.now() + 2 * 60 * 60 * 1000),
                    duration: "60 min",
                    therapist: "Dr. Sarah Chen",
                    status: "upcoming",
                    notes: "Focus on anxiety management techniques and breathing exercises. Discuss progress with sleep schedule."
                },
                {
                    id: 2,
                    title: "Trauma Therapy",
                    date: new Date(Date.now() - 2 * 24 * 60 * 60 * 1000),
                    duration: "90 min",
                    therapist: "Dr. James Wilson",
                    status: "completed",
                    notes: "Processed recent triggers and developed coping strategies. Good progress on grounding techniques."
                },
                {
                    id: 3,
                    title: "Group Therapy",
                    date: new Date(Date.now() + 7 * 24 * 60 * 60 * 1000),
                    duration: "120 min",
                    therapist: "Group led by Dr. Lisa Park",
                    status: "upcoming",
                    notes: ""
                },
                {
                    id: 4,
                    title: "Couples Counseling",
                    date: new Date(Date.now() - 5 * 24 * 60 * 60 * 1000),
                    duration: "75 min",
                    therapist: "Dr. Michael Rodriguez",
                    status: "missed",
                    notes: "Rescheduled for next week. Focus on communication patterns."
                }
            ];
            
            dashboardState.sessions = mockSessions.sort((a, b) => a.date - b.date);
        }

        function renderSessions() {
            if (dashboardState.sessions.length === 0) {
                loadMockSessions();
            }
            
            const sessionsList = document.getElementById('sessionsList');
            sessionsList.innerHTML = '';
            
            dashboardState.sessions.forEach(session => {
                const sessionItem = document.createElement('div');
                sessionItem.className = 'session-item';
                
                const statusClass = `status-${session.status}`;
                const dateString = session.date.toLocaleDateString('en-US', {
                    weekday: 'short',
                    month: 'short',
                    day: 'numeric',
                    hour: 'numeric',
                    minute: '2-digit',
                    hour12: true
                });
                
                sessionItem.innerHTML = `
                    <div class="session-info">
                        <div class="session-title">${session.title}</div>
                        <div class="session-meta">
                            <span><i class="far fa-calendar"></i> ${dateString}</span>
                            <span><i class="far fa-clock"></i> ${session.duration}</span>
                            <span><i class="fas fa-user-md"></i> ${session.therapist}</span>
                        </div>
                    </div>
                    <div class="session-status ${statusClass}">
                        ${session.status.charAt(0).toUpperCase() + session.status.slice(1)}
                    </div>
                    <div class="session-actions">
                        ${session.status === 'upcoming' ? 
                            `<button class="session-btn btn-prepare" onclick="prepareForSession(${session.id})">
                                <i class="fas fa-play-circle"></i> Prepare
                            </button>` : ''}
                        <button class="session-btn btn-notes" onclick="viewSessionNotes(${session.id})">
                            <i class="fas fa-sticky-note"></i> Notes
                        </button>
                    </div>
                `;
                
                sessionsList.appendChild(sessionItem);
            });
        }

        function addSession() {
            // Set default date/time to tomorrow at 3 PM
            const tomorrow = new Date();
            tomorrow.setDate(tomorrow.getDate() + 1);
            tomorrow.setHours(15, 0, 0, 0);
            
            const dateTimeInput = document.getElementById('sessionDateTime');
            const isoString = tomorrow.toISOString().slice(0, 16);
            dateTimeInput.value = isoString;
            
            openModal('addSessionModal');
        }

        function saveNewSession() {
            const sessionType = document.getElementById('sessionType').value;
            const dateTime = document.getElementById('sessionDateTime').value;
            
            if (!dateTime) {
                showToast('Please select a date and time');
                return;
            }
            
            const newSession = {
                id: Date.now(),
                title: getSessionTitle(sessionType),
                date: new Date(dateTime),
                duration: "60 min",
                therapist: getTherapistForType(sessionType),
                status: "upcoming",
                notes: ""
            };
            
            dashboardState.sessions.push(newSession);
            dashboardState.sessions.sort((a, b) => a.date - b.date);
            dashboardState.totalSessions++;
            
            renderSessions();
            updateStats();
            closeModal('addSessionModal');
            showToast('Session added successfully!');
        }

        function getSessionTitle(type) {
            const titles = {
                'cbt': 'CBT Therapy Session',
                'trauma': 'Trauma Therapy Session',
                'couples': 'Couples Counseling',
                'group': 'Group Therapy Session'
            };
            return titles[type] || 'Therapy Session';
        }

        function getTherapistForType(type) {
            const therapists = {
                'cbt': 'Dr. Sarah Chen',
                'trauma': 'Dr. James Wilson',
                'couples': 'Dr. Michael Rodriguez',
                'group': 'Group led by Dr. Lisa Park'
            };
            return therapists[type] || 'Your Therapist';
        }

        function prepareForSession(sessionId) {
            showToast('Preparing session materials...');
            // In a real app, this would open session preparation tools
        }

        function viewSessionNotes(sessionId) {
            const session = dashboardState.sessions.find(s => s.id === sessionId);
            if (!session) return;
            
            const notesContent = document.getElementById('notesContent');
            notesContent.innerHTML = `
                <h4 style="margin-bottom: 1rem; color: var(--calm-mind);">${session.title}</h4>
                <p style="color: rgba(255,255,255,0.7); margin-bottom: 1.5rem;">
                    ${session.date.toLocaleDateString('en-US', { 
                        weekday: 'long', 
                        year: 'numeric', 
                        month: 'long', 
                        day: 'numeric',
                        hour: 'numeric',
                        minute: '2-digit'
                    })}
                </p>
                <div style="background: rgba(255,255,255,0.05); padding: 1rem; border-radius: 10px; min-height: 150px;">
                    ${session.notes || '<p style="color: rgba(255,255,255,0.5); font-style: italic;">No notes recorded for this session.</p>'}
                </div>
                <textarea id="editNotes" style="width: 100%; margin-top: 1rem; padding: 1rem; 
                       background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.2); 
                       border-radius: 10px; color: white; min-height: 100px;"
                       placeholder="Add or edit notes here...">${session.notes || ''}</textarea>
                <button onclick="saveSessionNotes(${sessionId})" style="width: 100%; margin-top: 1rem; padding: 0.8rem; 
                       background: var(--primary-soul); color: white; border: none; border-radius: 10px; 
                       cursor: pointer; font-weight: bold;">
                    Save Notes
                </button>
            `;
            
            openModal('sessionNotesModal');
        }

        function saveSessionNotes(sessionId) {
            const session = dashboardState.sessions.find(s => s.id === sessionId);
            if (!session) return;
            
            const editTextarea = document.getElementById('editNotes');
            session.notes = editTextarea.value;
            
            closeModal('sessionNotesModal');
            showToast('Notes saved successfully!');
        }

        // ================== GOALS MANAGEMENT ==================
        function loadMockGoals() {
            const mockGoals = [
                {
                    id: 1,
                    title: "Improve Sleep Quality",
                    targetDate: new Date(Date.now() + 30 * 24 * 60 * 60 * 1000), // 30 days from now
                    progress: 60,
                    milestones: [
                        { text: "Establish bedtime routine", completed: true },
                        { text: "Reduce screen time before bed", completed: true },
                        { text: "Practice meditation daily", completed: false },
                        { text: "Achieve 8 hours of sleep", completed: false }
                    ],
                    icon: "fas fa-moon"
                },
                {
                    id: 2,
                    title: "Reduce Anxiety",
                    targetDate: new Date(Date.now() + 45 * 24 * 60 * 60 * 1000), // 45 days from now
                    progress: 75,
                    milestones: [
                        { text: "Learn breathing techniques", completed: true },
                        { text: "Daily journaling", completed: true },
                        { text: "Regular exercise", completed: true },
                        { text: "Therapy sessions", completed: false }
                    ],
                    icon: "fas fa-brain"
                },
                {
                    id: 3,
                    title: "Build Healthy Habits",
                    targetDate: new Date(Date.now() + 60 * 24 * 60 * 60 * 1000), // 60 days from now
                    progress: 40,
                    milestones: [
                        { text: "Morning routine", completed: true },
                        { text: "Healthy eating", completed: false },
                        { text: "Regular exercise", completed: false },
                        { text: "Social connections", completed: false }
                    ],
                    icon: "fas fa-heart"
                }
            ];
            
            dashboardState.goals = mockGoals;
        }

        function renderGoals() {
            if (dashboardState.goals.length === 0) {
                loadMockGoals();
            }
            
            const goalsGrid = document.getElementById('goalsGrid');
            goalsGrid.innerHTML = '';
            
            dashboardState.goals.forEach(goal => {
                const goalCard = document.createElement('div');
                goalCard.className = 'goal-card';
                
                const daysLeft = Math.ceil((goal.targetDate - Date.now()) / (1000 * 60 * 60 * 24));
                const milestoneItems = goal.milestones.map(milestone => `
                    <li class="${milestone.completed ? 'completed' : ''}">
                        <i class="fas fa-${milestone.completed ? 'check-circle' : 'circle'}"></i>
                        ${milestone.text}
                    </li>
                `).join('');
                
                goalCard.innerHTML = `
                    <div class="goal-header">
                        <div>
                            <h4 style="color: var(--hope-glow); margin-bottom: 0.5rem;">${goal.title}</h4>
                            <p style="font-size: 0.9rem; color: rgba(255,255,255,0.6);">
                                <i class="far fa-calendar"></i> 
                                ${goal.targetDate.toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' })} 
                                (${daysLeft} days left)
                            </p>
                        </div>
                        <div class="goal-icon">
                            <i class="${goal.icon}"></i>
                        </div>
                    </div>
                    <div class="goal-progress">
                        <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
                            <span style="font-size: 0.9rem;">Progress</span>
                            <span style="color: var(--hope-glow); font-weight: bold;">${goal.progress}%</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: ${goal.progress}%; background: linear-gradient(90deg, var(--hope-glow), #FFD166);"></div>
                        </div>
                    </div>
                    <ul class="goal-milestones">
                        ${milestoneItems}
                    </ul>
                `;
                
                goalsGrid.appendChild(goalCard);
            });
        }

        function addGoal() {
            // Set default date to 30 days from now
            const defaultDate = new Date();
            defaultDate.setDate(defaultDate.getDate() + 30);
            const dateString = defaultDate.toISOString().split('T')[0];
            
            document.getElementById('goalDate').value = dateString;
            document.getElementById('goalTitle').value = '';
            
            openModal('addGoalModal');
        }

        function saveNewGoal() {
            const title = document.getElementById('goalTitle').value.trim();
            const date = document.getElementById('goalDate').value;
            
            if (!title) {
                showToast('Please enter a goal title');
                return;
            }
            
            if (!date) {
                showToast('Please select a target date');
                return;
            }
            
            const newGoal = {
                id: Date.now(),
                title: title,
                targetDate: new Date(date),
                progress: 0,
                milestones: [
                    { text: "Define action plan", completed: false },
                    { text: "First week progress", completed: false },
                    { text: "Mid-point check", completed: false },
                    { text: "Achieve goal", completed: false }
                ],
                icon: "fas fa-star"
            };
            
            dashboardState.goals.push(newGoal);
            renderGoals();
            closeModal('addGoalModal');
            showToast('New goal created!');
        }

        // ================== RESOURCES MANAGEMENT ==================
        function loadMockResources() {
            const mockResources = [
                {
                    id: 1,
                    title: "Mindfulness Meditation Guide",
                    description: "Audio guides for daily mindfulness practice",
                    icon: "fas fa-headphones",
                    link: "#"
                },
                {
                    id: 2,
                    title: "Anxiety Management Workbook",
                    description: "Interactive exercises and worksheets",
                    icon: "fas fa-book-open",
                    link: "#"
                },
                {
                    id: 3,
                    title: "Sleep Hygiene Tips",
                    description: "Science-backed strategies for better sleep",
                    icon: "fas fa-bed",
                    link: "#"
                },
                {
                    id: 4,
                    title: "Therapy Session Journal",
                    description: "Track your thoughts and progress",
                    icon: "fas fa-journal-whills",
                    link: "#"
                },
                {
                    id: 5,
                    title: "Breathing Exercises",
                    description: "Techniques for stress relief",
                    icon: "fas fa-wind",
                    link: "#"
                },
                {
                    id: 6,
                    title: "Emergency Contacts",
                    description: "Immediate support when you need it",
                    icon: "fas fa-phone-alt",
                    link: "#"
                }
            ];
            
            dashboardState.resources = mockResources;
        }

        function renderResources() {
            if (dashboardState.resources.length === 0) {
                loadMockResources();
            }
            
            const resourcesGrid = document.getElementById('resourcesGrid');
            resourcesGrid.innerHTML = '';
            
            dashboardState.resources.forEach(resource => {
                const resourceCard = document.createElement('div');
                resourceCard.className = 'resource-card';
                
                resourceCard.innerHTML = `
                    <div class="resource-icon">
                        <i class="${resource.icon}"></i>
                    </div>
                    <h4 style="margin-bottom: 0.5rem; color: var(--primary-soul);">${resource.title}</h4>
                    <p style="color: rgba(255,255,255,0.7); font-size: 0.9rem; margin-bottom: 1rem;">
                        ${resource.description}
                    </p>
                    <a href="${resource.link}" class="resource-btn" onclick="showToast('Opening ${resource.title}...'); return false;">
                        Access Resource
                    </a>
                `;
                
                resourcesGrid.appendChild(resourceCard);
            });
        }

        function refreshResources() {
            showToast('Refreshing resources...');
            // In a real app, this would fetch updated resources from server
        }

        // ================== PROGRESS TRACKING ==================
        function loadMockProgressHistory() {
            const history = [];
            const now = new Date();
            
            for (let i = 30; i >= 0; i--) {
                const date = new Date(now);
                date.setDate(date.getDate() - i);
                
                history.push({
                    date: date,
                    anxiety: Math.floor(Math.random() * 20) + 70, // 70-90
                    sleep: Math.floor(Math.random() * 25) + 60,  // 60-85
                    stress: Math.floor(Math.random() * 15) + 75,  // 75-90
                    mood: Math.floor(Math.random() * 2) + 7       // 7-9
                });
            }
            
            dashboardState.progressHistory = history;
        }

        function renderProgressHistory() {
            if (dashboardState.progressHistory.length === 0) {
                loadMockProgressHistory();
            }
            
            const progressHistoryDiv = document.getElementById('progressHistory');
            progressHistoryDiv.innerHTML = '';
            
            // Show only last 7 entries
            const recentHistory = dashboardState.progressHistory.slice(-7);
            
            recentHistory.forEach(entry => {
                const historyItem = document.createElement('div');
                historyItem.className = 'progress-history-item';
                
                const dateString = entry.date.toLocaleDateString('en-US', { 
                    month: 'short', 
                    day: 'numeric' 
                });
                
                historyItem.innerHTML = `
                    <div class="progress-history-date">${dateString}</div>
                    <div style="flex: 1; display: flex; gap: 1rem; flex-wrap: wrap;">
                        <span style="color: var(--primary-soul);"><i class="fas fa-chart-line"></i> ${entry.anxiety}%</span>
                        <span style="color: var(--calm-mind);"><i class="fas fa-bed"></i> ${entry.sleep}%</span>
                        <span style="color: var(--hope-glow);"><i class="fas fa-fire"></i> ${entry.stress}%</span>
                        <span style="color: #FFD166;"><i class="fas fa-smile"></i> ${entry.mood}/10</span>
                    </div>
                `;
                
                progressHistoryDiv.appendChild(historyItem);
            });
        }

        function updateProgress() {
            // Simulate progress update
            const anxietyProgress = document.getElementById('detailedAnxietyProgress');
            const sleepProgress = document.getElementById('detailedSleepProgress');
            const stressProgress = document.getElementById('detailedStressProgress');
            const moodProgress = document.getElementById('detailedMoodProgress');
            
            // Random small improvements
            const improvements = {
                anxiety: Math.floor(Math.random() * 5) + 1,
                sleep: Math.floor(Math.random() * 3) + 1,
                stress: Math.floor(Math.random() * 4) + 1,
                mood: Math.floor(Math.random() * 2) + 1
            };
            
            // Update values
            const currentAnxiety = parseInt(anxietyProgress.textContent);
            const currentSleep = parseInt(sleepProgress.textContent);
            const currentStress = parseInt(stressProgress.textContent);
            const currentMood = parseInt(moodProgress.textContent);
            
            anxietyProgress.textContent = Math.min(currentAnxiety + improvements.anxiety, 100) + '%';
            sleepProgress.textContent = Math.min(currentSleep + improvements.sleep, 100) + '%';
            stressProgress.textContent = Math.min(currentStress + improvements.stress, 100) + '%';
            moodProgress.textContent = Math.min(currentMood + improvements.mood, 10) + '%';
            
            // Update progress bars
            document.getElementById('detailedAnxietyBar').style.width = anxietyProgress.textContent;
            document.getElementById('detailedSleepBar').style.width = sleepProgress.textContent;
            document.getElementById('detailedStressBar').style.width = stressProgress.textContent;
            document.getElementById('detailedMoodBar').style.width = moodProgress.textContent;
            
            // Update main stats
            dashboardState.progressScore = Math.min(dashboardState.progressScore + 1, 100);
            dashboardState.mindfulnessMinutes += 5;
            dashboardState.averageMood = Math.min(dashboardState.averageMood + 0.1, 10);
            
            updateStats();
            showToast('Progress updated! Keep up the great work!');
        }

        function showFullProgress() {
            // Navigate to progress section
            document.querySelector('.sidebar-link[data-section="progress"]').click();
        }

        // ================== AI ASSISTANT ==================
        function initializeAIChat() {
            const aiChatDiv = document.getElementById('aiChat');
            
            // Initial welcome message
            addAIMessage("Hello! I'm your AI Wellness Assistant. I'm here to help you with your mental wellness journey. You can ask me about therapy techniques, progress tracking, or general wellness tips. How can I assist you today?");
        }

        function addAIMessage(text) {
            const aiChatDiv = document.getElementById('aiChat');
            const messageDiv = document.createElement('div');
            messageDiv.className = 'ai-message';
            messageDiv.innerHTML = `<p>${text}</p>`;
            aiChatDiv.appendChild(messageDiv);
            aiChatDiv.scrollTop = aiChatDiv.scrollHeight;
        }

        function addUserMessage(text) {
            const aiChatDiv = document.getElementById('aiChat');
            const messageDiv = document.createElement('div');
            messageDiv.className = 'user-message';
            messageDiv.innerHTML = `<p>${text}</p>`;
            aiChatDiv.appendChild(messageDiv);
            aiChatDiv.scrollTop = aiChatDiv.scrollHeight;
        }

        function sendAIMessage() {
            const input = document.getElementById('aiMessageInput');
            const message = input.value.trim();
            
            if (!message) return;
            
            // Add user message
            addUserMessage(message);
            input.value = '';
            
            // Simulate AI thinking
            setTimeout(() => {
                const aiResponse = getAIResponse(message);
                addAIMessage(aiResponse);
            }, 1000);
        }

        function getAIResponse(message) {
            const lowerMessage = message.toLowerCase();
            
            // Predefined responses based on keywords
            if (lowerMessage.includes('anxiety') || lowerMessage.includes('stress')) {
                return "I understand you're asking about anxiety. Have you tried the 4-7-8 breathing technique? Breathe in for 4 seconds, hold for 7 seconds, exhale for 8 seconds. This can help calm your nervous system. Would you like more techniques?";
            } else if (lowerMessage.includes('sleep')) {
                return "For better sleep, try establishing a consistent bedtime routine. Avoid screens 1 hour before bed, keep your bedroom cool and dark, and try relaxation exercises. Our Sleep Hygiene resource has more detailed strategies.";
            } else if (lowerMessage.includes('progress') || lowerMessage.includes('track')) {
                return `Your current progress score is ${dashboardState.progressScore}%. You've completed ${dashboardState.totalSessions} sessions and logged ${dashboardState.mindfulnessMinutes} mindfulness minutes. Keep up the good work!`;
            } else if (lowerMessage.includes('session') || lowerMessage.includes('therapy')) {
                return "Your next session is " + dashboardState.nextSession.toLocaleDateString('en-US', { 
                    weekday: 'long', 
                    month: 'long', 
                    day: 'numeric',
                    hour: 'numeric',
                    minute: '2-digit'
                }) + ". Would you like help preparing for it?";
            } else if (lowerMessage.includes('hello') || lowerMessage.includes('hi')) {
                return "Hello! How can I support your wellness journey today?";
            } else if (lowerMessage.includes('thank')) {
                return "You're welcome! Remember, progress takes time. Celebrate your small victories along the way.";
            } else {
                return "I'm here to support your mental wellness journey. You can ask me about therapy techniques, progress tracking, sleep improvement, anxiety management, or general wellness tips. What would you like to know more about?";
            }
        }

        function clearAIChat() {
            const aiChatDiv = document.getElementById('aiChat');
            aiChatDiv.innerHTML = '';
            initializeAIChat();
            showToast('Chat cleared');
        }

        // ================== MODAL FUNCTIONS ==================
        function openModal(modalId) {
            document.getElementById(modalId).classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        function closeModal(modalId) {
            document.getElementById(modalId).classList.remove('active');
            document.body.style.overflow = 'auto';
        }

        function closeAllModals() {
            document.querySelectorAll('.modal').forEach(modal => {
                modal.classList.remove('active');
            });
            document.body.style.overflow = 'auto';
        }

        // ================== USER MENU ==================
        function toggleUserMenu() {
            const userMenu = document.getElementById('userMenu');
            userMenu.classList.toggle('active');
        }

        // ================== TOAST NOTIFICATIONS ==================
        function showToast(message) {
            const toast = document.getElementById('toast');
            toast.textContent = message;
            toast.classList.add('show');
            
            setTimeout(() => {
                toast.classList.remove('show');
            }, 3000);
        }

        // ================== MOCK DATA LOADING ==================
        function loadMockData() {
            loadMockSessions();
            loadMockGoals();
            loadMockResources();
            loadMockProgressHistory();
        }
    </script>
</body>
</html>
